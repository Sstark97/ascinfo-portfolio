---
title: "Arquitectura de islas en Astro"
image: "/images/blog/astro-islands.webp"
description: "La arquitectura de islas o Astro Islands se refiere a la existencia de componentes de UI interactivos en 
una p치gina HTML predominantemente est치tica. Pueden coexistir varias islas en una misma p치gina, y esa isla se renderiza 
de manera aislada...."
date: 2023-09-20
isPublished: true
tags:
    - "astro"
    - "web"
    - "arquitectura"
---
## Introducci칩n
Astro es uno de los framework web m치s sonados en los 칰ltimos meses. Y es que su premisa es bastante bastante prometedora, desarrollar sitos est치ticos y enviar cero JavaScript al cliente.

Podemos crear componentes de Astro reutilizables, con una sint치xis similar a la de jsx, pudiendo escribir c칩digo JavaScript en la parte superior del fichero.

```jsx
---
const title = "Hello Astro! 游뿛";
const technlogies = ["react", "vue", "svelte", "solid.js", "lit"];
---
    
<h1>{title}</h1>
<section>
    <h2>Technologies</h2>
{technologies.map(technology => <p>{technology}</p>})}
</section>    
```

Este c칩digo JavaScript se ejecutar치 칰nicamente a la hora de generar los ficheros est치ticos de nuestro sitio web.
Sin embargo podemos aprovechar otra de las grandes virtudes de este framework, la arquitectura de islas.

## Arquitectura de Islas (Astro Islands)
La arquitectura de islas o Astro Islands se refiere a la existencia de componentes de UI interactivos en una p치gina HTML predominantemente est치tica. Pueden coexistir varias islas en una misma p치gina, y esa isla se renderiza de manera aislada. El equipo de Astro comenta:
> Piensa en ellos como islas en un mar de HTML est치tico y no interactivo.

![](https://hackmd.io/_uploads/By7hUePyp.png)

Adem치s estos componentes de UI pueden ser de distintos frameworks o librer칤as, no tienen porque ser de la misma tecnolog칤a. Podemos mezclar varios, o utilizar con el que m치s estemos c칩modos (React, Svelte, Vue, Preact, Lit, etc.)

[Frameworks y Librer칤as compatibles](https://docs.astro.build/es/core-concepts/framework-components/)

Los componentes de otros frameworks podemos utilizarlos en p치ginas de Astro de la siguiente forma:
```jsx
---
// Ejemplo: Usa un componente est치tico React en la p치gina, sin JavaScript.
import MyReactComponent from '../components/MyReactComponent.jsx';
---
<!-- 100% HTML, 춰Cero JavaScript cargado en la p치gina! -->
<MyReactComponent />
```
## Directivas del cliente
Para decidir como hidratar esos componentes podemos a침adirle una serie de directivas.
```jsx
---
// Ejemplo: Usa un componente din치mico de React en la p치gina.
import MyReactComponent from '../components/MyReactComponent.jsx';
---
<!-- 춰Este componente ahora es interactivo en la p치gina!
     El resto de tu sitio web se mantendr치 est치tico con cero JS. -->
<MyReactComponent client:load />
```
En este ejemplo se usa la directiva client:load, que indica que est칠 componente debe ser interactivo en el cliente lo antes posible.
Algunas de las directivas son:

### client:idle
Elementos de menor prioridad (media), que no necesitan ser cargados inmediatamente. Carga y se hidrata una vez termine la carga inicial de la p치gina.
Esta directiva puede no ser compatible con todos los navegadores, en cuyo caso se usar치 la directiva load.

```jsx
---
import LoginButton from "./components/LoginButton.jsx"
---
<header>
    <!-- B칩ton que despliega un modal de Login -->
    <LoginButton client:idle />
</header>
```

### client:visible
Elementos de baja prioridad, que se encuentran en la parte inferior de la p치gina o que requieren de tantos recursos que es preferible no cargarlos. Se cargan 칰nicamente cuando est치n en el viewport.

```jsx
---
import Footer from "./components/Footer.jsx"
---
<header>
    <!-- Alg칰n menu de navegaci칩n, logo, etc -->
</header>
<main>
    <!-- Contenido principal de la p치gina-->
</main>
<!-- Cargar치 cuando este en el viewport -->
<Footer client:visible />
```

### client:media
Para elementos que s칩lo necesiten ser cargados en ciertos tama침os de pantalla, haciendo uso de media queries (CSS).

```jsx
---
import HamburgerNav from "./components/HamburgerNav.jsx"
---
<nav>
    <!-- Cargar치 unicamente en dicho tama침o de pantalla -->
    <HamburgerNav client:media="(max-width: 768px)" />
</nav>
```

### client:only
El elemento s칩lo se renderiza en el lado del cliente. Tienes que especificarle el tipo de framework correcto para que funcione correctamente.

```jsx
---
import PaginatedTable from "./components/PaginatedTable.jsx"
---
<section>
    <PaginatedTable client:only="react" />
</section>
```

Existen algunas directivas m치s, no solo para el cliente, que se pueden consultar en la [documentaci칩n](https://docs.astro.build/es/reference/directives-reference/) de Astro.

## Conclusi칩n
Desde mi punto de vista este framework tiene un potencial muy grande para generar p치ginas est치ticas, como portfolios, blogs o web personales, que no requieren una carga muy pesada de JavaScript.
Adem치s es el primer framework agn칩stico, podemos usar cualquier framework de UI en nuestro proyecto de Astro, dandonos la versatilidad de reutilizar o combinar otros componentes en nuestro proyecto.
Yo lo estoy usando para redise침ar mi [portfolio](https://ascinfo.dev) y a침adir una secci칩n para m칤 [blog](https://www.ascinfo.dev/blog). Comparto por [aqu칤](https://github.com/Sstark97/ascinfo-portfolio) el repositorio con el c칩digo para mostrar un ejemplo de uso de est치 herramienta.
Tiene much칤simas cosas que comentar y explorar, est치 en constante evoluci칩n. Hace poco sali칩 la versi칩n 3 y una nueva funcionalidad, compatibilidad con la [API de ViewTransitions](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API).
Est치s y otras mcuhas novedades merecen su art칤culo propio para explorarlas en profundidad.

## Referencias
Muchos de los ejemplos y explicaciones est치n basados en la documentaci칩n de Astro, a continuaci칩n los enlaces a las diferentes secciones:
- [Astro Islands](https://docs.astro.build/es/concepts/islands/)
- [Directivas del Cliente](https://docs.astro.build/es/reference/directives-reference/#directivas-del-cliente)